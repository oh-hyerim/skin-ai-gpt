<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DOST Skin Mobile</title>
    <link rel="stylesheet" href="/index.css">
</head>
<body>
    <div class="app">
        <!-- Skin Type Button -->
        <button id="skinTypeBtn" class="skin-type-btn">피부 타입</button>

        <!-- Popup Card -->
        <div id="skinCard" class="skin-card hidden">
            <div class="card-header">
                <span id="skinTypeLabel">피부 타입</span>
                <button id="closeCard" class="close-btn">&times;</button>
            </div>
            <div class="card-content">
                <!-- 추후 사용자 데이터에 따라 채워질 영역 -->
                <p>카드 영역입니다. 사용자별 피부 타입 정보를 표시합니다.</p>
            </div>
        </div>

        <!-- Page (기존) View -->
        <div id="pageView" class="view active">
            <main class="main-display">
                <div id="pagesWrapper" class="pages-wrapper"></div>
            </main>
            <!-- Page Indicators -->
            <div id="pageIndicators" class="page-indicators"></div>
        </div>

        <!-- Analysis View -->
        <div id="analysisView" class="view hidden">
            <div class="analysis-buttons">
                <button class="big-btn">프로필</button>
                <button class="big-btn">데일리</button>
            </div>
            <!-- 기록 서브뷰 -->
            <div id="recordView" class="record-view hidden">
                <div class="record-panel">
                    <div class="record-legend">
                        <label><input type="checkbox" name="metric-moisture" value="수분"> 수분</label>
                        <label><input type="checkbox" name="metric-oil" value="유분"> 유분</label>
                        <label><input type="checkbox" name="metric-trouble" value="트러블"> 트러블</label>
                        <label><input type="checkbox" name="metric-redness" value="홍조"> 홍조</label>
                        <label><input type="checkbox" name="metric-sensitive" value="민감성"> 민감성</label>
                        <label><input type="checkbox" name="metric-pore" value="모공"> 모공</label>
                        <label><input type="checkbox" name="metric-wrinkle" value="주름"> 주름</label>
                        <label><input type="checkbox" name="metric-uniform" value="피부균일"> 피부균일</label>
                        <label><input type="checkbox" name="metric-elastic" value="탄력"> 탄력</label>
                        <label><input type="checkbox" name="metric-spot" value="잡티"> 잡티</label>
                    </div>
                    <div class="record-chart" id="recordChartZone">
                        <canvas id="recordChart" width="260" height="200"></canvas>
                        <div class="record-dates" id="recordDates"></div>
                    </div>
                </div>
                <div class="record-info"></div>
            </div>

            <!-- 루틴 서브뷰 -->
            <div id="routineView" class="routine-view hidden">
                <header class="routine-header">
                    <div class="routine-datebar">
                        <button id="routinePrev" class="arrow left" aria-label="이전"></button>
                        <span class="date-text" id="routineDate">9월 1일</span>
                        <button id="routineNext" class="arrow right" aria-label="다음"></button>
                    </div>
                    <div class="routine-header-actions">
                        <button id="routineModeBtn" class="more-btn" aria-label="모드">⋯</button>
                        <div id="routineModeMenu" class="mode-menu hidden">
                            <button class="mode-btn" data-mode="add">추가</button>
                            <button class="mode-btn" data-mode="remove">제거</button>
                        </div>
                    </div>
                </header>
                <section class="routine-cards">
                    <article class="routine-card" id="morningCard">
                        <h3>아침</h3>
                        <ul class="routine-list">
                            <li><label><input type="checkbox" name="morning-1"> 약산성 폼클렌저</label></li>
                            <li><label><input type="checkbox" name="morning-2"> 토너</label></li>
                            <li><label><input type="checkbox" name="morning-3"> 에센스</label></li>
                            <li><label><input type="checkbox" name="morning-4"> 선크림</label></li>
                        </ul>
                        <button class="card-fab btn-add" title="추가">＋</button>
                        <button class="card-fab btn-remove" title="제거">−</button>
                    </article>
                    <article class="routine-card" id="eveningCard">
                        <h3>저녁</h3>
                        <ul class="routine-list">
                            <li><label><input type="checkbox" name="evening-1"> 오일 클렌저</label></li>
                            <li><label><input type="checkbox" name="evening-2"> 폼 클렌저</label></li>
                            <li><label><input type="checkbox" name="evening-3"> 토너</label></li>
                            <li><label><input type="checkbox" name="evening-4"> 에센스</label></li>
                            <li><label><input type="checkbox" name="evening-5"> 크림</label></li>
                        </ul>
                        <button class="card-fab btn-add" title="추가">＋</button>
                        <button class="card-fab btn-remove" title="제거">−</button>
                    </article>
                </section>
                <div class="routine-footer">
                    <button class="primary">루틴 완료</button>
                </div>
            </div>

            <!-- 내 제품 서브뷰 -->
            <div id="productView" class="product-view hidden">
                <button id="productAddBtn" class="product-add" aria-label="제품 추가">＋</button>
                <div id="productList" class="product-list"></div>
            </div>
            <nav class="analysis-nav">
                <button class="analysis-nav-btn active">분석</button>
                <button class="analysis-nav-btn">기록</button>
                <button class="analysis-nav-btn">루틴</button>
                <button class="analysis-nav-btn">내 제품</button>
            </nav>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn" data-label="분석">분석</button>
            <button class="nav-btn" data-label="커뮤니티">커뮤니티</button>
            <button class="nav-btn" data-label="상점">상점</button>
            <button class="nav-btn" data-label="메뉴">메뉴</button>
        </nav>

        <!-- Edit Overlay -->
        <div id="editOverlay" class="edit-overlay hidden">
            <div class="edit-panel">
                <button id="addPageBtn" class="edit-btn">페이지 추가</button>
                <button id="deletePageBtn" class="edit-btn">페이지 삭제</button>
                <ul id="pageList" class="page-list"></ul>
            </div>
        </div>
    </div>

    <!-- 상점 뷰 -->
    <div id="shopView" class="shop-view hidden">
        <div class="shop-container">
            <article class="shop-card">
                <div class="thumb placeholder"></div>
                <div class="shop-info">
                    <small>옵션: [토리든 공식몰]</small>
                    <h4>토리든</h4>
                    <p class="desc">다이브인 저분자 히알루론산 멀티 패드</p>
                    <p class="tags">수분 공급  /  진정  /  장벽강화</p>
                </div>
                <div class="rate">적합도<br><span>90%</span></div>
            </article>
            <!-- 두 번째 카드 예시 -->
            <article class="shop-card">
                <div class="thumb placeholder"></div>
                <div class="shop-info">
                    <small>옵션: [토리든 공식몰]</small>
                    <h4>토리든</h4>
                    <p class="desc">다이브인 저분자 히알루론산 멀티 패드</p>
                    <p class="tags">수분 공급  /  진정  /  장벽강화</p>
                    <ul class="details">
                        <li>부활초추출물을 배합해 수분장벽을 채워 매우 깊은 촉촉함</li>
                        <li>판테놀+세라마이드로 손상된 피부 장벽 강화</li>
                        <li>티트리추출물·우엉뿌리 복합가루 등 트러블을 빠르게 진정</li>
                    </ul>
                </div>
                <div class="rate">적합도<br><span>90%</span></div>
            </article>
            <p class="notice">*본 정보는 브랜드 공식 자료 기반으로 제공됩니다.</p>
        </div>
    </div>

    <!-- 설정 뷰 -->
    <div id="settingsView" class="settings-view hidden">
        <div class="settings-login-card">
            <button class="btn-outline">로그인</button>
            <button class="btn-outline">회원가입</button>
            <div id="settingsEmail" class="settings-email" style="display:none"></div>
        </div>
        <div class="settings-sep"></div>
        <button class="settings-item">알림 설정(푸쉬)</button>
        <button class="settings-item">1:1 문의하기</button>
        <button class="settings-item">FAQ / 공지사항</button>

        <div class="settings-sep"></div>
        <button class="settings-item">이용약관</button>
        <button class="settings-item">개인정보 처리방침</button>
        <button class="settings-item">오픈소스 라이선스</button>

        <div class="settings-sep"></div>
        <button class="settings-item">
            <span>버전 정보</span>
            <span class="muted">ver. 1.1</span>
        </button>
        <button class="settings-item">서비스 소개</button>

        <div class="settings-sep"></div>
        <button id="logoutBtn" class="settings-item" style="display:none">로그아웃</button>
        <button class="settings-item">닉네임 변경</button>
        <button class="settings-item">비밀번호 변경</button>
        <button class="settings-item">회원탈퇴</button>
    </div>

    <!-- 알람 뷰 -->
    <div id="alarmView" class="alarm-view hidden">
        <header class="alarm-header">
            <h3 class="alarm-title">알람</h3>
            <button class="hamburger" aria-label="메뉴">≡</button>
        </header>
        <div class="alarm-body">
            <div id="alarmList" class="alarm-list"></div>
        </div>
        <button class="alarm-add" aria-label="알람 추가">＋</button>
    </div>

    <!-- 알람 생성 폼 뷰 -->
    <div id="alarmFormView" class="alarm-form hidden">
        <div class="time-row">
            <div class="ampm-group" data-target="start">
                <button class="ampm-btn active" data-value="AM">오전</button>
                <button class="ampm-btn" data-value="PM">오후</button>
            </div>
            <div class="time-inputs" data-target="start">
                <input class="time-num" name="startHour" maxlength="2" inputmode="numeric" placeholder="00" autocomplete="off"> :
                <input class="time-num" name="startMinute" maxlength="2" inputmode="numeric" placeholder="00" autocomplete="off">
            </div>
        </div>
        <div class="tilde">~</div>
        <div class="time-row">
            <div class="ampm-group" data-target="end">
                <button class="ampm-btn active" data-value="AM">오전</button>
                <button class="ampm-btn" data-value="PM">오후</button>
            </div>
            <div class="time-inputs" data-target="end">
                <input class="time-num" name="endHour" maxlength="2" inputmode="numeric" placeholder="00" autocomplete="off"> :
                <input class="time-num" name="endMinute" maxlength="2" inputmode="numeric" placeholder="00" autocomplete="off">
            </div>
        </div>
        <div class="repeat-row">
            <label class="repeat-label" for="repeatAll">매일</label>
            <input id="repeatAll" type="checkbox" class="repeat-all">
        </div>
        <div class="weekday-row">
            <button class="weekday-btn" data-day="0">일</button>
            <button class="weekday-btn" data-day="1">월</button>
            <button class="weekday-btn" data-day="2">화</button>
            <button class="weekday-btn" data-day="3">수</button>
            <button class="weekday-btn" data-day="4">목</button>
            <button class="weekday-btn" data-day="5">금</button>
            <button class="weekday-btn" data-day="6">토</button>
        </div>
        <div class="save-row">
            <button id="alarmCancelBtn" class="alarm-cancel">취소</button>
            <button id="alarmSaveBtn" class="alarm-save">저장</button>
        </div>
    </div>

    <!-- 메뉴 뷰 -->
    <div id="menuView" class="menu-view hidden">
        <header class="menu-header">
            <div class="menu-bar">
                <span></span>
                <button id="loginBtn" class="login-btn">로그인</button>
            </div>
        </header>
        <div class="menu-grid">
            <button class="circle-btn" data-go="analysis">분석</button>
            <button class="circle-btn" data-go="community">커뮤니티</button>
            <button class="circle-btn" data-go="shop">상점</button>
            <button class="circle-btn" data-go="camera">카메라</button>
            <button class="circle-btn" data-go="gallery">갤러리</button>
            <button class="circle-btn" data-go="alarm">알람</button>
            <button class="circle-btn" data-go="settings">설정</button>
            <button class="circle-btn disabled"></button>
            <button class="circle-btn disabled"></button>
            <button class="circle-btn disabled"></button>
            <button class="circle-btn disabled"></button>
            <button class="circle-btn disabled"></button>
        </div>
    </div>

    <!-- 로그인 오버레이 (Next.js 페이지를 iframe으로 표시) -->
    <div id="loginView" class="login-view hidden">
        <button id="loginClose" class="login-close" aria-label="닫기">×</button>
        <iframe id="loginFrame" class="login-frame" src="" frameborder="0"></iframe>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.2/Sortable.min.js" defer></script>
    
    <script src="/index.js" defer></script>
</body>
</html>